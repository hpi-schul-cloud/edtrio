{"version":3,"sources":["config/theme.ts","schema.ts","dev-document-viewer/DocumentViewer.jsx","plugins/audio/index.js","helpers/Hotkey.js","plugins/code-block/index.js","plugins/embed/ServiceTypeIcon.jsx","plugins/embed/index.js","plugins/embed/handlers.js","plugins/geogebra/Geogebra.jsx","plugins/geogebra/index.js","plugins/headlines/index.js","plugins/image/index.js","plugins/markdown-shortcuts/index.js","plugins/paste-url-handler/handlers/YoutubeHandler.js","plugins/paste-url-handler/handlers/VimeoHandler.js","plugins/paste-url-handler/handlers/VideoHandler.js","plugins/paste-url-handler/handlers/AudioHandler.js","plugins/paste-url-handler/index.js","plugins/section/Controls.jsx","plugins/section/index.js","helpers/Icon.jsx","helpers/Button.jsx","plugins/text-menu/HoverMenu.jsx","plugins/text-menu/index.js","plugins/title/SaveBar/index.jsx","plugins/title/index.js","plugins/video/index.js","plugins/index.ts","plugins/add-section/index.js","plugins/plus-menu/actions.js","plugins/plus-menu/PlusMenu.jsx","Editor.tsx","plugins/plus-menu/index.js","App.tsx","index.tsx","plugins/title/SaveBar/SaveBar.module.scss"],"names":["theme","colors","darkRed","red","schema","document","nodes","match","type","min","max","react","audio_schema","blocks","audio","isVoid","AudioNode","props","src","mimeType","selected","attributes","Object","objectWithoutProperties","react_default","a","createElement","assign","className","concat","controls","preload","style","width","minHeight","RenderAudioNode","renderNode","node","isFocused","data","get","includes","Hotkey","hotkey","fn","onKeyDown","event","change","editor","lib_default","call","code_block_schema","code","marks","toggleCodeBlock","isCode","value","some","block","setBlocks","CodeNode","children","HandleEnterKey","startBlock","key","insertText","preventDefault","RenderCodeNode","embed_ServiceTypeIcon","icon","color","this","free_brands_svg_icons_index_es","free_solid_svg_icons_index_es","index_es","size","embed_schema","embed","toggleEmbedBlock","RenderEmbedNode","embed_EmbedNode","RenderEmbedPlaceholder","renderPlaceholder","_ref","parent","object","text","contentEditable","display","whiteSpace","onMouseDown","e","onChange","moveToEndOfNode","focus","EmbedNode","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","_setDataAttribute","url","provider","_this$props","setNodeByKey","handlePasteUrl","pastedData","clipboardData","window","getData","is_url_default","_handleUrl","handlers","regex","mapUrl","regexMatch","_i","length","handler","exec","mappedUrl","handleUrl","stopPropagation","setState","state","_this$props2","_this$state","Fragment","flexDirection","marginBottom","title","frameBorder","allowFullScreen","onPaste","Component","Geogebra_GeogebraNode","GeogebraNode","id","resourceId","applet","createRef","nextProps","_this2","saveContent","objectSpread","content","ref","srcDoc","renderHTML","RenderGeogebraNode","headlines_schema","h1","h2","h3","h4","h5","RenderHeadlines","Image","options","changes","insertImage","image_insertImage","helpers","components","ImageNode","plugins","RenderImageNode","image_schema","img","target","select","insertBlock","alt","HandleKeyDown","onSpace","onBackspace","onEnter","selection","isExpanded","start","chars","slice","offset","replace","_getType","wrapBlock","moveFocusToStartOfNode","delete","unwrapBlock","end","splitBlock","RenderMoreTextBlocks","YoutubeHandler","validate","YoutubeHandler_validate","dealWithIt","YoutubeHandler_dealWithIt","insertYoutubeVideo","_regex","videoId","VimeoHandler","VimeoHandler_validate","VimeoHandler_dealWithIt","VimeoHandler_insertYoutubeVideo","VimeoHandler_regex","VideoHandler","VideoHandler_validate","VideoHandler_dealWithIt","insertVideo","fileExtension","substr","lastIndexOf","browser_media_mime_type_default","AudioHandler","AudioHandler_validate","AudioHandler_dealWithIt","insertAudio","HandlePaste","transfer","slate_react_es","section_Controls","toggleVisibilityOfSection","isVisible","parentSection","getParentSection","deleteSection","removeNodeByKey","moveSection","direction","moveToSection","currentSection","getPreviousSibling","getNextSibling","moveToIndex","findIndex","moveNodeByKey","anchorBlock","getParent","data-tooltip","section_schema","section","v","RenderSectionNode","RenderPNode","_ref2","ensureAlwaysMinOneSection","normalizeNode","first","last","newSection","slate_es","create","insertNodeByKey","count","ensureLastNodeInSectionIsP","newParagraph","helpers_Icon","rest","verticalAlign","paddingBottom","helpers_Button","active","reversed","DEFAULT_NODE","text_menu_HoverMenu","HoverMenu","renderBlockButton","onClickBlock","isActive","hasBlock","update","menuWrapper","fragment","isBlurred","isCollapsed","rect","getSelection","getRangeAt","getBoundingClientRect","newStyle","top","pageYOffset","offsetHeight","left","pageXOffset","offsetWidth","root","getElementById","react_dom_default","createPortal","wrapper","renderMarkButton","_this3","activeMarks","mark","onClickMark","toggleMark","TextMenu","RenderTextMarks","renderMark","title_SaveBar","SaveBar","handleUndo","undo","handleRedo","redo","updateLastSaved","newTimestamp","lastSaved","SaveBar_module_default","button","href","rel","saveText","moment_default","fromNow","title_schema","title_HandleKeyDown","moveToRangeOfNode","nextBlock","RenderTitleNode","RenderPlaceholder","ensureAlwaysMinOneTitle","newTitle","video_schema","video","VideoNode","RenderVideoNode","toConsumableArray","add_section_AddSectionButton","margin","onClickNewSectionButton","add_section_appendNewSection","lastIndex","onClickCodeButton","_insertCodeBlock","onClickIframeButton","_insertEmbedBlock","plus_menu_PlusMenu","PlusMenu","handleCloseUppyModal","uppyOpen","tooltip","arguments","undefined","_ref$resetMenu","resetMenu","nodeElBBox","right","innerWidth","x","uppy","core_lib_default","restrictions","maxFileSize","allowedFileTypes","autoProceed","_len","Array","_key","closeUppyWindow","on","result","successful","forEach","image","reset","fr","FileReader","onload","readAsDataURL","apply","_uppy_react","locale","strings","addMoreFiles","closeModal","importFrom","dashboardWindowTitle","dashboardTitle","copyLinkToClipboardSuccess","copyLinkToClipboardFallback","copyLink","fileSource","done","removeFile","editFile","editing","edit","finishEditingFile","myDevice","dropPasteImport","dropPaste","browse","uploadComplete","xFilesSelected","0","1","uploading","complete","uploadFailed","pleasePressRetry","paused","error","retry","cancel","retryUpload","pauseUpload","resumeUpload","cancelUpload","filesUploadedOfTotal","dataUploadedOfTotal","xTimeLeft","uploadXFiles","uploadXNewFiles","closeModalOnClickOutside","note","open","onRequestClose","src_Editor","Editor","componentDidMount","updateMenu","componentDidUpdate","handleSave","timestamp","Date","JSON","stringify","_addHeaderInformationToDocument","localStorage","setItem","newSavedTimestamp","valueJSON","toJSON","handleLoad","getItem","existingValue","parse","fromJSON","src_value","debounce","clearTimeout","setTimeout","hoverMenu","plusMenu","isEmpty","AddSectionButton","marginTop","menu","autoFocus","spellCheck","AppWrapper","styled_components_browser_esm","div","_templateObject","src_App_0","src_root","render","module","exports"],"mappings":"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","file":"static/js/main.e0b1eb66.chunk.js","sourcesContent":["export const theme = {\n  colors: {\n    darkRed: \"rgba(175, 4, 55, 0.5)\",\n    red: \"rgba(175, 4, 55, 1)\",\n  },\n};\n","export default {\n  document: {\n    nodes: [\n      { match: [{ type: \"title\" }], min: 1, max: 1 },\n      { match: [{ type: \"section\" }], min: 1 },\n    ],\n  },\n};\n","import React, { Component } from \"react\";\n\nclass DocumentViewer extends Component {\n  render() {\n    const { doc } = this.props;\n\n    return (\n      <aside className=\"\">\n        <hr />\n        <h2 className=\"title is-5\">Internal document state</h2>\n        <pre>\n          <code>{JSON.stringify(doc, null, 4)}</code>\n        </pre>\n      </aside>\n    );\n  }\n}\n\nexport default DocumentViewer;\n","import React from \"react\";\n\nexport default function Audio(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: { AudioNode },\n    plugins: [RenderAudioNode, { schema }],\n  };\n}\n\nconst schema = {\n  blocks: {\n    audio: {\n      isVoid: true,\n    },\n  },\n};\n\nfunction AudioNode(props) {\n  const { src, mimeType, selected, ...attributes } = props;\n\n  return (\n    <div\n      className={`plugin-wrapper ${selected ? \"selected\" : \"\"}`}\n      {...attributes}\n    >\n      <audio\n        className=\"audio\"\n        controls\n        preload=\"metadata\"\n        style={{ width: \"100%\", minHeight: \"54px\" }}\n      >\n        <source src={src} type={mimeType} />\n        Your browser does not support the audio tag.\n      </audio>\n    </div>\n  );\n}\n\nconst RenderAudioNode = {\n  renderNode(props) {\n    const { attributes, node, isFocused } = props;\n\n    if (node.type === \"audio\") {\n      const src = node.data.get(\"src\");\n      const mimeType = node.data.get(\"mimeType\");\n      if ((mimeType || \"\").includes(\"audio\")) {\n        return (\n          <AudioNode\n            src={src}\n            mimeType={mimeType}\n            selected={isFocused}\n            {...attributes}\n          />\n        );\n      }\n    }\n  },\n};\n","import isHotkey from \"is-hotkey\";\n\nexport default function Hotkey(hotkey, fn) {\n  return {\n    onKeyDown(event, change, editor) {\n      if (isHotkey(hotkey, event)) {\n        change.call(fn);\n      }\n    },\n  };\n}\n","import React from \"react\";\n\nimport Hotkey from \"../../helpers/Hotkey\";\n\nimport \"./style.css\";\n\nexport default function Code(options) {\n  return {\n    changes: {},\n    helpers: {\n      toggleCodeBlock,\n    },\n    components: {\n      CodeNode,\n    },\n    plugins: [\n      Hotkey(\"Control+c\", toggleCodeBlock),\n      RenderCodeNode,\n      HandleEnterKey,\n      { schema },\n    ],\n  };\n}\n\nconst schema = {\n  blocks: {\n    code: {\n      marks: [],\n    },\n  },\n};\n\nfunction toggleCodeBlock(change) {\n  const isCode = change.value.blocks.some(block => block.type === \"code\");\n  change.setBlocks(isCode ? \"p\" : \"code\");\n  return true;\n}\n\nfunction CodeNode(props) {\n  return (\n    <pre\n      className={`code-block ${props.selected ? \"selected\" : \"\"}`}\n      {...props.attributes}\n    >\n      <code>{props.children}</code>\n    </pre>\n  );\n}\n\nconst HandleEnterKey = {\n  onKeyDown(event, change) {\n    if (change.value.startBlock.type !== \"code\") return;\n\n    switch (event.key) {\n      case \"Enter\":\n        return change.insertText(\"\\n\");\n      case \"Tab\":\n        event.preventDefault();\n        return change.insertText(\"  \");\n      default:\n      // pass\n    }\n  },\n};\n\nconst RenderCodeNode = {\n  renderNode(props) {\n    return props.node.type === \"code\" ? (\n      <CodeNode selected={props.isFocused} {...props} />\n    ) : null;\n  },\n};\n","import React, { Component } from \"react\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faExternalLinkSquareAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faYoutube, faVimeo } from \"@fortawesome/free-brands-svg-icons\";\n\nclass ServiceTypeIcon extends Component {\n  render() {\n    const { type } = this.props;\n\n    let icon, color;\n    switch (type) {\n      case \"youtube\":\n        icon = faYoutube;\n        color = \"#ff0000\";\n        break;\n      case \"vimeo\":\n        icon = faVimeo;\n        color = \"#00acf2\";\n        break;\n      default:\n        icon = faExternalLinkSquareAlt;\n    }\n\n    return <FontAwesomeIcon icon={icon} style={{ color: color }} size=\"lg\" />;\n  }\n}\n\nexport default ServiceTypeIcon;\n","import React from 'react'\n\nimport isUrl from 'is-url'\n\nimport Hotkey from '../../helpers/Hotkey'\nimport handleUrl from './handlers'\nimport ServiceTypeIcon from './ServiceTypeIcon'\n\nexport default function Embed(options) {\n  return {\n    changes: {},\n    helpers: {\n      toggleEmbedBlock\n    },\n    components: {\n      EmbedNode\n    },\n    plugins: [\n      Hotkey('Control+e', toggleEmbedBlock),\n      RenderEmbedNode,\n      RenderEmbedPlaceholder,\n      { schema }\n    ]\n  }\n}\n\nconst schema = {\n  blocks: {\n    embed: {\n      marks: []\n    }\n  }\n}\n\nfunction toggleEmbedBlock(change) {\n  const isCode = change.value.blocks.some(block => block.type === 'embed')\n  change.setBlocks(isCode ? 'p' : 'embed')\n  return true\n}\n\nconst RenderEmbedNode = {\n  renderNode(props) {\n    return props.node.type === 'embed' ? (\n      <EmbedNode\n        selected={props.isFocused}\n        editor={props.editor}\n        node={props.node}\n        {...props}\n      />\n    ) : null\n  }\n}\n\nconst RenderEmbedPlaceholder = {\n  renderPlaceholder({ editor, node, parent }) {\n    if (node.object !== 'block') return\n    if (node.type !== 'embed') return\n    if (node.text !== '') return\n\n    // if there is a url, don't render the placeholder :-)\n    if (node.data.get('url')) return\n\n    return (\n      <span\n        contentEditable={false}\n        style={{ display: 'inline-block', width: '0', whiteSpace: 'nowrap' }}\n        className=\"has-text-grey-light\"\n        onMouseDown={e => {\n          const change = editor.value.change()\n          const onChange = editor.props.onChange\n          onChange(change.moveToEndOfNode(node).focus())\n          return true\n        }}\n      >\n        z. Bsp. https://www.youtube.com/watch?v=nS4a_bTv5_Y\n      </span>\n    )\n  }\n}\n\nclass EmbedNode extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      provider: props.node.data.get('provider') || '',\n      url: props.node.data.get('url') || ''\n    }\n  }\n\n  _setDataAttribute = (url, provider) => {\n    const { editor, node } = this.props\n    const change = editor.value.change()\n    const onChange = editor.props.onChange\n\n    const c = change.setNodeByKey(node.key, {\n      data: {\n        provider: provider,\n        url: url\n      }\n    })\n    onChange(c)\n  }\n\n  handlePasteUrl = e => {\n    e.preventDefault()\n\n    // Get pasted data via clipboard API\n    const clipboardData = e.clipboardData || window.clipboardData\n    const pastedData = clipboardData.getData('Text')\n\n    if (!isUrl(pastedData)) {\n      return\n    }\n\n    const { provider, url } = handleUrl(pastedData)\n\n    e.stopPropagation()\n    this._setDataAttribute(url, provider)\n    this.setState({\n      url: url,\n      provider: provider\n    })\n  }\n\n  render() {\n    const { selected, attributes, children } = this.props\n    const { url, provider } = this.state\n\n    return (\n      <React.Fragment>\n        {url && (\n          <div\n            className={`plugin-wrapper embed-container ${\n              selected ? 'selected' : ''\n            }`}\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n              marginBottom: 5\n            }}\n            {...attributes}\n          >\n            <iframe\n              title=\"Video\"\n              style={{ minHeight: '22rem' }}\n              src={url}\n              frameBorder=\"0\"\n              allowFullScreen\n            />\n          </div>\n        )}\n        <div className=\"control has-icons-left\" {...attributes} style={{}}>\n          <p\n            className={`input ${selected && !url ? 'is-focused' : ''}`}\n            onPaste={this.handlePasteUrl}\n          >\n            {children}\n            {url}\n          </p>\n          <span className=\"icon is-left\">\n            <ServiceTypeIcon type={provider} />\n          </span>\n        </div>\n      </React.Fragment>\n    )\n  }\n}\n","export default function handleUrl(url) {\n  const handlers = [\n    {\n      provider: 'youtube',\n      regex: /youtu(?:be\\.com\\/watch\\?v=|\\.be\\/)([\\w\\-_]*)/i,\n      mapUrl: regexMatch => {\n        return `https://www.youtube-nocookie.com/embed/${regexMatch[1]}`\n      }\n    },\n    {\n      provider: 'vimeo',\n      //eslint-disable-next-line\n      regex: /vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|)(\\d+)(?:|\\/\\?)/i,\n      mapUrl: regexMatch => {\n        return `https://player.vimeo.com/video/${regexMatch[2]}`\n      }\n    },\n    {\n      provider: 'default',\n      regex: /.*/i\n    }\n  ]\n\n  for (let handler of handlers) {\n    const regexMatch = handler.regex.exec(url)\n\n    if (regexMatch) {\n      const mappedUrl = handler.mapUrl ? handler.mapUrl(regexMatch, url) : url\n\n      return {\n        provider: handler.provider,\n        url: mappedUrl\n      }\n    }\n  }\n}\n","import React, { Component } from \"react\";\n\nimport \"./style.css\";\n//RHYH3UQ8\n\nexport default class GeogebraNode extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      id: props.resourceId || \"jaz8F8hZ\",\n    };\n\n    this.applet = React.createRef();\n  }\n\n  shouldComponentUpdate(nextProps, { id }) {\n    return id !== this.state.id;\n  }\n\n  renderApplet(id) {\n    this.setState(\n      () => {\n        return {\n          id,\n        };\n      },\n      () => this.props.saveContent(this.state),\n    );\n  }\n\n  renderHTML() {\n    return `<!DOCTYPE>\n        <html>\n        <head>\n            <meta name=viewport content=\"width=device-width,initial-scale=1\">\n            <script src=\"https://cdn.geogebra.org/apps/deployggb.js\"></script>\n        </head>\n        <body>\n            <div id=\"ggb-element\" style=\"margin: 0 auto\"></div> \n\n            <script>\n                var ggbApp = new GGBApplet({'appName': 'graphing', 'material_id': '${\n                  this.state.id\n                }'}, true)\n                window.addEventListener('load', function() { \n                    ggbApp.inject('ggb-element')\n                })\n            </script>\n        </body>\n        </html>\n        `;\n  }\n\n  componentDidMount() {\n    this.setState({\n      ...this.props.content,\n    });\n  }\n\n  render() {\n    // FIXME: props.selected never turn false, even if geogebra\n    // isnt selected anymore\n    return (\n      <div\n        className={`geogebra-wrapper plugin-wrapper ${\n          this.props.selected ? \"selected\" : \"\"\n        }`}\n        ref={this.applet}\n      >\n        {this.state.id && (\n          <iframe\n            title={`Geogebra applet #${this.state.id}`}\n            className=\"geogebra\"\n            srcDoc={this.renderHTML()}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport GeogebraNode from \"./Geogebra\";\n\nexport default function Geogebra(options) {\n  return {\n    changes: {\n      insertGeogebraNode,\n    },\n    helpers: {},\n    components: {\n      GeogebraNode,\n    },\n    plugins: [RenderGeogebraNode],\n  };\n}\n\nfunction insertGeogebraNode(change, id, target) {\n  if (target) {\n    change.select(target);\n  }\n\n  change.insertBlock({\n    type: \"geogebra\",\n    isVoid: true,\n    data: { id },\n  });\n}\n\nconst RenderGeogebraNode = {\n  renderNode(props) {\n    const { attributes, node, isFocused } = props;\n\n    if (node.type === \"geogebra\") {\n      const id = node.data.get(\"id\");\n\n      return (\n        <GeogebraNode selected={isFocused} resourceId={id} {...attributes} />\n      );\n    }\n  },\n};\n\n/**\n * onClickGeogebraButton = event => {\n        const { insertGeogebraNode } = Geogebra().changes\n\n        event.preventDefault()\n        const id = window.prompt('Enter the geogebra id:') || 'RHYH3UQ8'\n        if(!id) return\n\n        const change = this.state.value.change().call(insertGeogebraNode, id).call(insertParagraph)\n\n        this.onChange(change)\n    }\n */\n","import React from \"react\";\n\nexport default function Headlines(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {},\n    plugins: [{ schema }, RenderHeadlines],\n  };\n}\n\nconst schema = {\n  blocks: {\n    h1: {\n      marks: [],\n    },\n    h2: {\n      marks: [],\n    },\n    h3: {\n      marks: [],\n    },\n    h4: {\n      marks: [],\n    },\n    h5: {\n      marks: [],\n    },\n  },\n};\n\nconst RenderHeadlines = {\n  renderNode(props) {\n    const { attributes, children, node } = props;\n\n    switch (node.type) {\n      case \"h1\":\n        return <h2 {...attributes}>{children}</h2>;\n      case \"h2\":\n        return <h3 {...attributes}>{children}</h3>;\n      case \"h3\":\n        return <h4 {...attributes}>{children}</h4>;\n      case \"h4\":\n        return <h5 {...attributes}>{children}</h5>;\n      case \"h5\":\n        return <h6 {...attributes}>{children}</h6>;\n      default:\n        return;\n    }\n  },\n};\n","import React from \"react\";\n\nimport \"./style.css\";\n\nexport default function Image(options) {\n  return {\n    changes: {\n      insertImage,\n    },\n    helpers: {},\n    components: {\n      ImageNode,\n    },\n    plugins: [RenderImageNode, { schema }],\n  };\n}\n\nconst schema = {\n  blocks: {\n    img: {\n      isVoid: true,\n    },\n  },\n};\n\n/**\n * Change that inserts an image block displaying the src image\n */\nfunction insertImage(change, src, target) {\n  if (target) {\n    change.select(target);\n  }\n\n  change.insertBlock({\n    type: \"img\",\n    data: { src },\n  });\n}\n\n/**\n * React Component that displays an actual image from props.src url\n */\nfunction ImageNode(props) {\n  const { src, selected, ...attributes } = props;\n\n  return (\n    <img\n      src={src}\n      className={`plugin-wrapper image ${selected ? \"selected\" : \"\"}`}\n      alt=\"Uploaded by user\"\n      {...attributes}\n    />\n  );\n}\n\n/**\n * Overwrites Slates Editor.renderNode(props) to actually render\n * ImageNode for `img` tags\n */\nconst RenderImageNode = {\n  renderNode(props) {\n    const { attributes, node, isFocused } = props;\n\n    if (node.type === \"img\") {\n      const src = node.data.get(\"src\");\n      return <ImageNode src={src} selected={isFocused} {...attributes} />;\n    }\n  },\n};\n","import React from \"react\";\n\n// Taken and adapted from https://github.com/ianstormtaylor/slate/blob/master/examples/markdown-shortcuts/index.js\n\nexport default function MarkdownShortcuts(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {},\n    plugins: [RenderMoreTextBlocks, HandleKeyDown],\n  };\n}\n\nconst HandleKeyDown = {\n  onKeyDown(event, change) {\n    switch (event.key) {\n      case \" \":\n        return onSpace(event, change);\n      case \"Backspace\":\n        return onBackspace(event, change);\n      case \"Enter\":\n        return onEnter(event, change);\n      default:\n      //pass\n    }\n  },\n};\n\n/**\n * On space, if it was after an auto-markdown shortcut,\n * convert the current node into the shortcut's\n * corresponding type.\n *\n * @param {Event} event\n * @param {Change} change\n */\nconst onSpace = (event, change) => {\n  const { value } = change;\n  const { selection } = value;\n  if (selection.isExpanded) return;\n\n  const { startBlock } = value;\n  const { start } = selection;\n  const chars = startBlock.text.slice(0, start.offset).replace(/\\s*/g, \"\");\n  const type = _getType(chars);\n\n  if (!type) return;\n  if (type === \"li\" && startBlock.type === \"li\") return;\n  event.preventDefault();\n\n  change.setBlocks(type);\n\n  if (type === \"li\") {\n    change.wrapBlock(\"ul\");\n  }\n\n  change.moveFocusToStartOfNode(startBlock).delete();\n  return true;\n};\n\n/**\n * On backspace, if at the start of a non-paragraph,\n * convert it back into a paragraph node.\n *\n * @param {Event} event\n * @param {Change} change\n */\n\nconst onBackspace = (event, change) => {\n  const { value } = change;\n  const { selection } = value;\n  if (selection.isExpanded) return;\n  if (selection.start.offset !== 0) return;\n\n  const { startBlock } = value;\n  if (startBlock.type === \"p\") return;\n\n  event.preventDefault();\n  change.setBlocks(\"p\");\n\n  if (startBlock.type === \"li\") {\n    change.unwrapBlock(\"ul\");\n  }\n\n  return true;\n};\n\n/**\n * On return, if at the end of a node type that\n * should not be extended, create a new paragraph\n * below it.\n *\n * @param {Event} event\n * @param {Change} change\n */\n\nconst onEnter = (event, change) => {\n  const { value } = change;\n  const { selection } = value;\n  const { start, end, isExpanded } = selection;\n  if (isExpanded) return;\n\n  const { startBlock } = value;\n  if (start.offset === 0 && startBlock.text.length === 0)\n    return onBackspace(event, change);\n  if (end.offset !== startBlock.text.length) return;\n\n  if (\n    startBlock.type !== \"h1\" &&\n    startBlock.type !== \"h2\" &&\n    startBlock.type !== \"h3\" &&\n    startBlock.type !== \"h4\" &&\n    startBlock.type !== \"h5\" &&\n    startBlock.type !== \"blockquote\"\n  ) {\n    return;\n  }\n\n  event.preventDefault();\n  change.splitBlock().setBlocks(\"p\");\n  return true;\n};\n\n/**\n * Get the block type for a series of auto-markdown shortcut `chars`.\n *\n * @param {String} chars\n * @return {String} block\n */\n\nconst _getType = chars => {\n  switch (chars) {\n    case \"*\":\n    case \"-\":\n    case \"+\":\n      return \"li\";\n    case \">\":\n      return \"blockquote\";\n    case \"#\":\n      return \"h1\";\n    case \"##\":\n      return \"h2\";\n    case \"###\":\n      return \"h3\";\n    case \"####\":\n      return \"h4\";\n    case \"#####\":\n      return \"h5\";\n    default:\n      return null;\n  }\n};\n\nconst RenderMoreTextBlocks = {\n  renderNode(props) {\n    const { attributes, children, node } = props;\n\n    switch (node.type) {\n      case \"blockquote\":\n        return <blockquote {...attributes}>{children}</blockquote>;\n      case \"ul\":\n        return <ul {...attributes}>{children}</ul>;\n      case \"li\":\n        return <li {...attributes}>{children}</li>;\n      default:\n      //pass\n    }\n  },\n};\n","export default function YoutubeHandler(options) {\n  return {\n    validate,\n    dealWithIt,\n    changes: {\n      insertYoutubeVideo,\n    },\n    helpers: {},\n    components: {},\n    plugins: [],\n  };\n}\n\nconst _regex = /youtu(?:be\\.com\\/watch\\?v=|\\.be\\/)([\\w\\-_]*)/i;\n\nconst validate = url => {\n  return !!_regex.exec(url);\n};\n\nconst dealWithIt = (url, change) => {\n  const videoId = _regex.exec(url)[1];\n  change.call(insertYoutubeVideo, videoId);\n  return true;\n};\n\nfunction insertYoutubeVideo(change, videoId) {\n  change.insertBlock({\n    type: \"embed\",\n    isVoid: true,\n    data: {\n      provider: \"youtube\",\n      url: `https://www.youtube-nocookie.com/embed/${videoId}`,\n    },\n  });\n}\n","export default function VimeoHandler(options) {\n  return {\n    validate,\n    dealWithIt,\n    changes: {\n      insertYoutubeVideo,\n    },\n    helpers: {},\n    components: {},\n    plugins: [],\n  };\n}\n\n//eslint-disable-next-line\nconst _regex = /vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|)(\\d+)(?:|\\/\\?)/i;\n\nconst validate = url => {\n  return !!_regex.exec(url);\n};\n\nconst dealWithIt = (url, change) => {\n  const videoId = _regex.exec(url)[2];\n  change.call(insertYoutubeVideo, videoId);\n  return true;\n};\n\nfunction insertYoutubeVideo(change, videoId) {\n  change.insertBlock({\n    type: \"embed\",\n    isVoid: true,\n    data: {\n      provider: \"vimeo\",\n      url: `https://player.vimeo.com/video/${videoId}`,\n    },\n  });\n}\n","import mimeLookup from \"browser-media-mime-type\";\n\nexport default function VideoHandler(options) {\n  return {\n    validate,\n    dealWithIt,\n    changes: {\n      insertVideo,\n    },\n    helpers: {},\n    components: {},\n    plugins: [],\n  };\n}\n\nconst validate = url => {\n  const fileExtension = url.substr(url.lastIndexOf(\".\") + 1);\n  const mimeType = mimeLookup(fileExtension);\n  return (mimeType || \"\").includes(\"video\");\n};\n\nconst dealWithIt = (url, change) => {\n  const fileExtension = url.substr(url.lastIndexOf(\".\") + 1);\n  const mimeType = mimeLookup(fileExtension);\n  change.call(insertVideo, url, mimeType);\n  return true;\n};\n\nfunction insertVideo(change, src, mimeType) {\n  change.insertBlock({\n    type: \"video\",\n    data: { src, mimeType },\n  });\n}\n","import mimeLookup from \"browser-media-mime-type\";\n\nexport default function AudioHandler(options) {\n  return {\n    validate,\n    dealWithIt,\n    changes: {\n      insertAudio,\n    },\n    helpers: {},\n    components: {},\n    plugins: [],\n  };\n}\n\nconst validate = url => {\n  const fileExtension = url.substr(url.lastIndexOf(\".\") + 1);\n  const mimeType = mimeLookup(fileExtension);\n  return (mimeType || \"\").includes(\"audio\");\n};\n\nconst dealWithIt = (url, change) => {\n  const fileExtension = url.substr(url.lastIndexOf(\".\") + 1);\n  const mimeType = mimeLookup(fileExtension);\n  change.call(insertAudio, url, mimeType);\n  return true;\n};\n\nfunction insertAudio(change, src, mimeType, target) {\n  change.insertBlock({\n    type: \"audio\",\n    data: { src, mimeType },\n  });\n}\n","import { getEventTransfer } from \"slate-react\";\nimport isUrl from \"is-url\";\n\nimport YoutubeHandler from \"./handlers/YoutubeHandler\";\nimport VimeoHandler from \"./handlers/VimeoHandler\";\nimport VideoHandler from \"./handlers/VideoHandler\";\nimport AudioHandler from \"./handlers/AudioHandler\";\n\nexport default function PasteURLHandler(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {},\n    plugins: [\n      HandlePaste,\n      ...YoutubeHandler().plugins,\n      ...VimeoHandler().plugins,\n      ...VideoHandler().plugins,\n      ...AudioHandler().plugins,\n    ],\n  };\n}\n\nconst HandlePaste = {\n  onPaste(event, change, editor) {\n    const transfer = getEventTransfer(event);\n    const { type, text } = transfer;\n\n    if (type === \"text\") {\n      if (!isUrl(text)) {\n        return;\n      }\n\n      if (YoutubeHandler().validate(text)) {\n        return YoutubeHandler().dealWithIt(text, change);\n      }\n\n      if (VimeoHandler().validate(text)) {\n        return VimeoHandler().dealWithIt(text, change);\n      }\n\n      if (VideoHandler().validate(text)) {\n        return VideoHandler().dealWithIt(text, change);\n      }\n\n      if (AudioHandler().validate(text)) {\n        return AudioHandler().dealWithIt(text, change);\n      }\n\n      return;\n    }\n  },\n};\n","import React, { Component } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faEye,\n  faEyeSlash,\n  faChevronDown,\n  faChevronUp,\n  faTrashAlt,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nclass Controls extends Component {\n  /**\n   * Hides/unhides the current section\n   */\n  toggleVisibilityOfSection = (change, onChange, isVisible) => {\n    const parentSection = this.getParentSection(change);\n\n    const c = change.setNodeByKey(parentSection.key, {\n      data: {\n        isVisible: !isVisible,\n      },\n    });\n    onChange(c);\n  };\n\n  /**\n   * Delete the current section\n   */\n  deleteSection = (change, onChange) => {\n    const parentSection = this.getParentSection(change);\n\n    const c = change.removeNodeByKey(parentSection.key);\n    onChange(c);\n  };\n\n  /**\n   * Move the current section up or down\n   * @param {string} direction `UP` or `DOWN`\n   */\n  moveSection = (change, onChange, direction) => {\n    const currentSection = this.getParentSection(change);\n    const { document } = change.value;\n\n    let moveToSection;\n    if (direction === \"UP\") {\n      moveToSection = document.getPreviousSibling(currentSection.key);\n    } else if (direction === \"DOWN\") {\n      moveToSection = document.getNextSibling(currentSection.key);\n    } else {\n      // ONLY \"UP\" OR \"DOWN\" ARE ALLOWED FOR PARAMETER direction'\n      return;\n    }\n\n    if (!moveToSection || moveToSection.type !== \"section\") {\n      return;\n    }\n\n    const moveToIndex = document.nodes.findIndex(node => {\n      if (node.key === moveToSection.key) {\n        return true;\n      }\n      return false;\n    });\n\n    const c = change.moveNodeByKey(\n      currentSection.key,\n      document.key,\n      moveToIndex,\n    );\n    onChange(c);\n  };\n\n  getParentSection = change => {\n    let parent = change.value.anchorBlock;\n    do {\n      parent = change.value.document.getParent(parent.key);\n\n      if (!parent) {\n        //Couldn't find parent.\n        return;\n      }\n    } while (parent.type !== \"section\");\n\n    return parent;\n  };\n\n  render() {\n    const { editor, isVisible } = this.props;\n\n    return (\n      <aside className=\"buttons section-controls\">\n        <button\n          className=\"button is-white\"\n          onMouseDown={e => {\n            e.preventDefault();\n            this.deleteSection(editor.value.change(), editor.props.onChange);\n          }}\n        >\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={faTrashAlt} />\n          </span>\n        </button>\n        <button\n          className=\"button is-white\"\n          onMouseDown={e => {\n            e.preventDefault();\n            this.moveSection(\n              editor.value.change(),\n              editor.props.onChange,\n              \"UP\",\n            );\n          }}\n        >\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={faChevronUp} />\n          </span>\n        </button>\n        <button\n          className=\"button is-white\"\n          onMouseDown={e => {\n            e.preventDefault();\n            this.moveSection(\n              editor.value.change(),\n              editor.props.onChange,\n              \"DOWN\",\n            );\n          }}\n        >\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={faChevronDown} />\n          </span>\n        </button>\n        <button\n          className={`button is-white tooltip ${\n            !isVisible ? \"is-tooltip-active\" : \"\"\n          }`}\n          data-tooltip={\n            isVisible ? \"Abschnitt ausblenden\" : \"Abschnitt ausgeblendet\"\n          }\n          onMouseDown={e => {\n            e.preventDefault();\n            this.toggleVisibilityOfSection(\n              editor.value.change(),\n              editor.props.onChange,\n              isVisible,\n            );\n          }}\n        >\n          <span className=\"icon is-small\">\n            <FontAwesomeIcon icon={isVisible ? faEye : faEyeSlash} />\n          </span>\n        </button>\n      </aside>\n    );\n  }\n}\n\nexport default Controls;\n","import React from \"react\";\nimport \"./style.css\";\n\nimport Controls from \"./Controls\";\n\nimport { Block, Text } from \"slate\";\n\nexport default function Section(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {},\n    plugins: [\n      RenderSectionNode,\n      RenderPNode,\n      { schema },\n      ensureAlwaysMinOneSection,\n      ensureLastNodeInSectionIsP,\n    ],\n  };\n}\n\nconst schema = {\n  blocks: {\n    section: {\n      data: {\n        isVisible: v => typeof v === \"boolean\",\n      },\n      parent: { object: \"document\" },\n    },\n  },\n};\n\nconst RenderSectionNode = {\n  renderNode({ attributes, editor, children, node, isFocused }) {\n    if (node.type === \"section\") {\n      const isVisible = node.data.get(\"isVisible\");\n      return (\n        <section\n          className={`section content ${!isVisible ? \"hidden\" : \"\"}`}\n          {...attributes}\n        >\n          {children}\n          {isFocused ? (\n            <Controls editor={editor} isVisible={isVisible} />\n          ) : null}\n        </section>\n      );\n    }\n  },\n};\n\nconst RenderPNode = {\n  renderNode({ attributes, children, node }) {\n    if (node.type === \"p\") {\n      return <p {...attributes}>{children}</p>;\n    }\n  },\n};\n\nconst ensureAlwaysMinOneSection = {\n  normalizeNode(node) {\n    if (node.object !== \"document\") return;\n    const { nodes } = node;\n    if (nodes.size <= 0 || nodes.size >= 2) return;\n    if (nodes.first().type !== \"title\") return;\n    if (nodes.last().type === \"section\") return;\n\n    const newSection = Block.create({\n      type: \"section\",\n      data: {\n        isVisible: true,\n      },\n      nodes: [\n        Block.create({\n          type: \"p\",\n          nodes: [Text.create()],\n        }),\n      ],\n    });\n\n    return change =>\n      change.insertNodeByKey(node.key, nodes.count(), newSection);\n  },\n};\n\nconst ensureLastNodeInSectionIsP = {\n  normalizeNode(node) {\n    if (node.type !== \"section\") return;\n    const { nodes } = node;\n    if (nodes.count() > 0 && nodes.last().type === \"p\") return;\n\n    const newParagraph = Block.create({\n      type: \"p\",\n      nodes: [Text.create()],\n    });\n\n    return change =>\n      change.insertNodeByKey(node.key, nodes.count(), newParagraph);\n  },\n};\n","import React from \"react\";\n\nconst Icon = ({ className, children, ...rest }) => (\n  <i\n    style={{\n      verticalAlign: \"middle\",\n      paddingBottom: \"3px\",\n    }}\n    className={`material-icons ${className}`}\n    {...rest}\n  >\n    {children}\n  </i>\n);\n\nexport default Icon;\n","import React from \"react\";\n\nimport \"./button.css\";\n\nconst Button = props => (\n  <span\n    className={`edtrio-button ${props.active ? \"active\" : \"\"} ${\n      props.reversed ? \"reversed\" : \"\"\n    }`}\n    onMouseDown={props.onMouseDown}\n  >\n    {props.children}\n  </span>\n);\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./style.css\";\n\nimport Icon from \"../../helpers/Icon\";\nimport Button from \"../../helpers/Button\";\n\n// Taken and adapted from https://github.com/ianstormtaylor/slate/tree/master/examples/hovering-menu\nconst DEFAULT_NODE = \"p\";\n\nclass HoverMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      style: {},\n    };\n  }\n\n  render() {\n    const { className } = this.props;\n    const root = window.document.getElementById(\"root\");\n\n    return ReactDOM.createPortal(\n      <div\n        className={`hover-menu ${className}`}\n        style={this.state.style}\n        ref={wrapper => (this.menuWrapper = wrapper)}\n      >\n        {this.renderMarkButton(\"strong\", \"format_bold\")}\n        {this.renderMarkButton(\"em\", \"format_italic\")}\n        {this.renderMarkButton(\"code\", \"code\")}\n        {this.renderBlockButton(\"h1\", \"looks_one\", this.onClickBlock)}\n        {this.renderBlockButton(\"h2\", \"looks_two\", this.onClickBlock)}\n      </div>,\n      root,\n    );\n  }\n\n  /**\n   * Render a mark-toggling toolbar button.\n   *\n   * @param {String} type\n   * @param {String} icon\n   * @return {Element}\n   */\n  renderMarkButton(type, icon) {\n    const { value } = this.props;\n    const isActive = value.activeMarks.some(mark => mark.type === type);\n    return (\n      <Button\n        reversed\n        active={isActive}\n        onMouseDown={event => this.onClickMark(event, type)}\n      >\n        <Icon>{icon}</Icon>\n      </Button>\n    );\n  }\n\n  /**\n   * Render a block-toggling toolbar button.\n   *\n   * @param {String} type\n   * @param {String} icon\n   * @return {Element}\n   */\n\n  renderBlockButton = (type, icon, onClickBlock) => {\n    const isActive = this.hasBlock(type);\n\n    return (\n      <Button\n        reversed\n        active={isActive}\n        onMouseDown={event => onClickBlock(event, type)}\n      >\n        <Icon>{icon}</Icon>\n      </Button>\n    );\n  };\n\n  /**\n   * Check if the any of the currently selected blocks are of `type`.\n   *\n   * @param {String} type\n   * @return {Boolean}\n   */\n\n  hasBlock = type => {\n    const { value } = this.props;\n    return value.blocks.some(node => node.type === type);\n  };\n\n  /**\n   * Update the menu's absolute position\n   */\n  update = () => {\n    if (!this.menuWrapper) {\n      return;\n    }\n\n    const { value } = this.props;\n    const { fragment, selection } = value;\n\n    if (selection.isBlurred || selection.isCollapsed || fragment.text === \"\") {\n      this.setState({\n        style: {},\n      });\n      return;\n    }\n\n    const nativeSelection = window.getSelection();\n    const range = nativeSelection.getRangeAt(0);\n    const rect = range.getBoundingClientRect();\n\n    let newStyle = {};\n    newStyle.opacity = 1;\n    newStyle.top = `${rect.top +\n      window.pageYOffset -\n      this.menuWrapper.offsetHeight}px`;\n\n    newStyle.left = `${rect.left +\n      window.pageXOffset -\n      this.menuWrapper.offsetWidth / 2 +\n      rect.width / 2}px`;\n\n    this.setState({\n      style: newStyle,\n    });\n  };\n\n  /**\n   * When a mark button is clicked, toggle the current mark.\n   *\n   * @param {Event} event\n   * @param {String} type\n   */\n  onClickMark(event, type) {\n    const { value, onChange } = this.props;\n    event.preventDefault();\n    const change = value.change().toggleMark(type);\n    onChange(change);\n  }\n\n  /**\n   * When a block button is clicked, toggle the block type.\n   *\n   * @param {Event} event\n   * @param {String} type\n   */\n\n  onClickBlock = (event, type) => {\n    const { value, onChange } = this.props;\n    event.preventDefault();\n    const change = value.change();\n\n    const isActive = this.hasBlock(type);\n    change.setBlocks(isActive ? DEFAULT_NODE : type);\n\n    onChange(change);\n  };\n}\n\nexport default HoverMenu;\n","import React from \"react\";\nimport HoverMenu from \"./HoverMenu\";\n\nexport default function TextMenu(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {\n      HoverMenu,\n    },\n    plugins: [RenderTextMarks],\n  };\n}\n\nconst RenderTextMarks = {\n  renderMark(props) {\n    const { children, mark, attributes } = props;\n\n    switch (mark.type) {\n      case \"strong\":\n        return <strong {...attributes}>{children}</strong>;\n      case \"code\":\n        return <code {...attributes}>{children}</code>;\n      case \"em\":\n        return <em {...attributes}>{children}</em>;\n      default:\n        return;\n    }\n  },\n};\n","import React, { Component } from \"react\";\nimport styles from \"./SaveBar.module.scss\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUndo, faRedo, faQuestion } from \"@fortawesome/free-solid-svg-icons\";\nimport moment from \"moment\";\n\nclass SaveBar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      lastSaved: this.props.lastSaved || null,\n    };\n\n    window.updateLastSaved = this.updateLastSaved;\n  }\n\n  handleUndo = event => {\n    event.preventDefault();\n    this.props.editor.change(change => change.undo());\n  };\n\n  handleRedo = event => {\n    event.preventDefault();\n    this.props.editor.change(change => change.redo());\n  };\n\n  updateLastSaved = newTimestamp => {\n    this.setState({ lastSaved: newTimestamp });\n  };\n\n  render() {\n    return (\n      <nav className=\"level\" contentEditable={false}>\n        <div className=\"level-left\">\n          <div className=\"level-item\">\n            <span className={styles.button} onMouseDown={this.handleUndo}>\n              <FontAwesomeIcon icon={faUndo} />\n            </span>\n            <span className={styles.button} onMouseDown={this.handleRedo}>\n              <FontAwesomeIcon icon={faRedo} />\n            </span>\n            <a\n              href=\"https://github.com/schul-cloud/edtrio/wiki/Edtr.io-Hilfe\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className={styles.button}\n            >\n              <FontAwesomeIcon icon={faQuestion} />\n            </a>\n            <div className={styles.saveText}>\n              {`${moment(this.state.lastSaved).fromNow()} aktualisiert`}\n            </div>\n          </div>\n        </div>\n      </nav>\n    );\n  }\n}\n\nexport default SaveBar;\n","import React from \"react\";\nimport { Block, Text } from \"slate\";\n\nimport SaveBar from \"./SaveBar\";\n\nexport default function Title(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {},\n    plugins: [\n      RenderTitleNode,\n      HandleKeyDown,\n      { schema },\n      RenderPlaceholder,\n      ensureAlwaysMinOneTitle,\n    ],\n  };\n}\n\nconst schema = {\n  blocks: {\n    title: {\n      marks: [],\n    },\n  },\n};\n\nconst HandleKeyDown = {\n  onKeyDown(event, change) {\n    if (event.key === \"Enter\") {\n      if (change.value.startBlock.type !== \"title\") {\n        return;\n      }\n\n      event.preventDefault();\n      change.moveToRangeOfNode(change.value.nextBlock);\n      return true;\n    }\n    return;\n  },\n};\n\nconst RenderTitleNode = {\n  renderNode(props) {\n    const { attributes, children, editor, node, parent } = props;\n\n    if (node.type === \"title\") {\n      return (\n        <React.Fragment>\n          <h1 className=\"title is-1\" {...attributes}>\n            {children}\n          </h1>\n          <SaveBar editor={editor} lastSaved={parent.data.get(\"lastSaved\")} />\n        </React.Fragment>\n      );\n    }\n  },\n};\n\nconst RenderPlaceholder = {\n  renderPlaceholder({ editor, node }) {\n    if (node.object !== \"block\") return;\n    if (node.type !== \"title\") return;\n    if (node.text !== \"\") return;\n\n    return (\n      <span\n        contentEditable={false}\n        style={{ display: \"inline-block\", width: \"0\", whiteSpace: \"nowrap\" }}\n        className=\"has-text-grey-light\"\n        onMouseDown={e => {\n          const change = editor.value.change();\n          const onChange = editor.props.onChange;\n          onChange(change.moveToEndOfNode(node).focus());\n          return true;\n        }}\n      >\n        Gib mir einen Namen\n      </span>\n    );\n  },\n};\n\nconst ensureAlwaysMinOneTitle = {\n  normalizeNode(node) {\n    const { nodes } = node;\n    if (node.object !== \"document\") return;\n    if (nodes.size > 1) return;\n    if (nodes.size > 0 && nodes.first().type === \"title\") return;\n\n    const newTitle = Block.create({\n      type: \"title\",\n      data: {\n        isVisible: true,\n      },\n      nodes: [Text.create()],\n    });\n\n    return change => change.insertNodeByKey(node.key, 0, newTitle);\n  },\n};\n","import React from \"react\";\n\nexport default function Video(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: { VideoNode },\n    plugins: [RenderVideoNode, { schema }],\n  };\n}\n\nconst schema = {\n  blocks: {\n    video: {\n      isVoid: true,\n    },\n  },\n};\n\nfunction VideoNode(props) {\n  const { src, mimeType, selected, ...attributes } = props;\n\n  return (\n    <div\n      className={`plugin-wrapper ${selected ? \"selected\" : \"\"}`}\n      {...attributes}\n    >\n      <video className=\"video\" controls preload=\"metadata\">\n        <source src={src} type={mimeType} />\n        Your browser does not support the video tag.\n      </video>\n    </div>\n  );\n}\n\nconst RenderVideoNode = {\n  renderNode(props) {\n    const { attributes, node, isFocused } = props;\n\n    if (node.type === \"video\") {\n      const src = node.data.get(\"src\");\n      const mimeType = node.data.get(\"mimeType\");\n      if ((mimeType || \"\").includes(\"video\")) {\n        return (\n          <VideoNode\n            src={src}\n            mimeType={mimeType}\n            selected={isFocused}\n            {...attributes}\n          />\n        );\n      }\n    }\n  },\n};\n","// @ts-ignore:\nimport Audio from \"./audio/index\";\n// @ts-ignore:\nimport CodeBlockPlugin from \"./code-block/index\";\n// @ts-ignore:\nimport Embed from \"./embed/index\";\n// @ts-ignore:\nimport Geogebra from \"./geogebra/index\";\n// @ts-ignore:\nimport Headlines from \"./headlines/index\";\n// @ts-ignore:\nimport Image from \"./image/index\";\n// @ts-ignore:\nimport MarkdownShortcuts from \"./markdown-shortcuts/index\";\n// @ts-ignore:\nimport PasteURLHandler from \"./paste-url-handler/index\";\n// @ts-ignore:\nimport PlusMenuPlugin from \"./plus-menu/index\";\n// @ts-ignore:\nimport Section from \"./section/index\";\n// @ts-ignore:\nimport TextMenu from \"./text-menu/index\";\n// @ts-ignore:\nimport Title from \"./title/index\";\n// @ts-ignore:\nimport Video from \"./video/index\";\n\nexport const plugins = [\n  ...Title().plugins,\n  ...Section().plugins,\n  ...TextMenu().plugins,\n  ...Headlines().plugins,\n  ...MarkdownShortcuts().plugins,\n  ...Embed().plugins,\n  ...Video().plugins,\n  ...Audio().plugins,\n  ...PasteURLHandler().plugins,\n  ...CodeBlockPlugin().plugins,\n  ...Image().plugins,\n  ...Geogebra().plugins,\n];\n","import React from \"react\";\nimport { Block, Text } from \"slate\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\n\nexport default function AddSection(options) {\n  return {\n    changes: {\n      appendNewSection,\n    },\n    helpers: {},\n    components: {\n      AddSectionButton,\n    },\n    plugins: [],\n  };\n}\n\nfunction AddSectionButton(props) {\n  return (\n    <div className=\"level\">\n      <button\n        className=\"level-item button is-white has-text-grey\"\n        style={{\n          margin: \"1rem 0\",\n        }}\n        onMouseDown={event =>\n          onClickNewSectionButton(event, props.value.change(), props.onChange)\n        }\n      >\n        <span className=\"icon\">\n          <FontAwesomeIcon icon={faPlus} />\n        </span>\n        <span>Abschnitt hinzuf&uuml;gen</span>\n      </button>\n    </div>\n  );\n}\n\nconst onClickNewSectionButton = (event, change, onChange) => {\n  event.preventDefault();\n\n  onChange(change.call(appendNewSection));\n};\n\nconst appendNewSection = change => {\n  const newSection = Block.create({\n    type: \"section\",\n    data: {\n      isVisible: true,\n    },\n    nodes: [\n      Block.create({\n        type: \"p\",\n        nodes: [Text.create()],\n      }),\n    ],\n  });\n\n  const document = change.value.document;\n  const lastIndex = document.nodes.count();\n\n  return change\n    .insertNodeByKey(document.key, lastIndex, newSection)\n    .moveToEndOfNode(newSection);\n};\n","import Image from \"../image\";\nimport { Text, Block } from \"slate\";\n\n/**\n * handles clicks on the imageblock button and\n * forwards them accordingly to plugins/image\n */\nexport const onClickImageButton = (\n  event,\n  change,\n  onChange,\n  uppy,\n  closeUppyWindow,\n) => {\n  const { insertImage } = Image().changes;\n\n  event.preventDefault();\n\n  uppy.on(\"complete\", result => {\n    closeUppyWindow();\n\n    result.successful.forEach(image => {\n      uppy.reset();\n\n      // TODO: replace with proper file upload (e.g. to S3)\n      const fr = new FileReader();\n      fr.onload = () => {\n        change.call(insertImage, fr.result);\n        onChange(change);\n      };\n\n      fr.readAsDataURL(image.data);\n    });\n  });\n};\n\n/**\n * handles clicks on the codeblock button and\n * forwards them accordingly to plugins/code-block\n */\nexport const onClickCodeButton = (event, change, onChange) => {\n  event.preventDefault();\n\n  change.call(_insertCodeBlock);\n\n  onChange(change);\n};\n\nexport const onClickIframeButton = (event, change, onChange) => {\n  event.preventDefault();\n\n  change.call(_insertEmbedBlock);\n\n  onChange(change);\n};\n\nfunction _insertCodeBlock(change, target) {\n  if (target) {\n    change.select(target);\n  }\n\n  change.insertBlock(\n    Block.create({\n      type: \"code\",\n      nodes: [Text.create()],\n    }),\n  );\n}\n\nfunction _insertEmbedBlock(change, target) {\n  if (target) {\n    change.select(target);\n  }\n\n  change.insertBlock(\n    Block.create({\n      type: \"embed\",\n      nodes: [Text.create()],\n    }),\n  );\n}\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { findDOMNode } from \"slate-react\";\nimport \"./style.css\";\n\nimport Uppy from \"@uppy/core\";\nimport { DashboardModal } from \"@uppy/react\";\n\nimport {\n  onClickImageButton,\n  onClickCodeButton,\n  onClickIframeButton,\n} from \"./actions\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faImage,\n  faCode,\n  faExternalLinkSquareAlt,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nclass PlusMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      style: {},\n      uppyOpen: false,\n    };\n\n    this.uppy = Uppy({\n      restrictions: {\n        maxFileSize: 1000000, // 1MB\n        allowedFileTypes: [\"image/*\"],\n      },\n      autoProceed: true,\n    });\n  }\n\n  handleCloseUppyModal = () => {\n    this.setState({ uppyOpen: false });\n  };\n\n  render() {\n    const { className } = this.props;\n    const root = window.document.getElementById(\"root\");\n\n    return ReactDOM.createPortal(\n      <div\n        className={`plus-menu ${className}`}\n        style={this.state.style}\n        ref={wrapper => (this.menuWrapper = wrapper)}\n      >\n        {this.renderBlockButton(faImage, \"Bild einfgen\", (...props) => {\n          this.setState({ uppyOpen: true });\n          onClickImageButton(...props, this.uppy, this.handleCloseUppyModal);\n        })}\n        {this.renderBlockButton(\n          faCode,\n          \"Code Block einfgen\",\n          onClickCodeButton,\n        )}\n        {this.renderBlockButton(\n          faExternalLinkSquareAlt,\n          \"Iframe einfgen\",\n          onClickIframeButton,\n        )}\n        <DashboardModal\n          uppy={this.uppy}\n          locale={{\n            strings: {\n              addMoreFiles: \"Weitere Dateien hinzufgen\",\n              closeModal: \"Fenster schlieen\",\n              importFrom: \"Von %{name} importieren\",\n              dashboardWindowTitle:\n                \"Uppy Dashboard Fenster (ESC zum schlieen)\",\n              dashboardTitle: \"Uppy Dashboard\",\n              copyLinkToClipboardSuccess: \"Link in Zwischenablage kopiert.\",\n              copyLinkToClipboardFallback: \"Kopiere den Link unten\",\n              copyLink: \"Link kopieren\",\n              fileSource: \"Quelle: %{name}\",\n              done: \"Fertig\",\n              removeFile: \"Datei entfernen\",\n              editFile: \"Datei bearbeiten\",\n              editing: \"%{file} wird bearbeitet\",\n              edit: \"Bearbeiten\",\n              finishEditingFile: \"Bearbeiten abschlieen\",\n              myDevice: \"Mein Gert\",\n              dropPasteImport:\n                \"Ziehe Dateien hierhin, fge sie ein, %{browse} oder importiere sie von\",\n              dropPaste: \"%{browse} deine Bilder oder lege sie hier ab\",\n              browse: \"Durchsuche\",\n              uploadComplete: \"Hochladen fertig\",\n              xFilesSelected: {\n                0: \"%{smart_count} Datei ausgewhlt\",\n                1: \"%{smart_count} Dateien ausgewhlt\",\n              },\n\n              // @uppy/status-bar strings:\n              uploading: \"Ldt hoch\",\n              complete: \"Fertig\",\n              uploadFailed: \"Hochladen fehlgeschlagen\",\n              pleasePressRetry:\n                \"Bitte klicke Erneut versuchen um es noch einmal zu versuchen\",\n              paused: \"Pausiert\",\n              error: \"Fehler\",\n              retry: \"Erneut versuchen\",\n              cancel: \"Abbrechen\",\n              retryUpload: \"Hochladen erneut versuchen\",\n              pauseUpload: \"Hochladen pausieren\",\n              resumeUpload: \"Hochladen fortsetzen\",\n              cancelUpload: \"Hochladen abbrechen\",\n              filesUploadedOfTotal: {\n                0: \"%{complete} von %{smart_count} Datei hochgeladen\",\n                1: \"%{complete} von %{smart_count} Dateien hochgeladen\",\n              },\n              dataUploadedOfTotal: \"%{complete} von %{total}\",\n              xTimeLeft: \"%{time} verbleibend\",\n              uploadXFiles: {\n                0: \"%{smart_count} Datei hochladen\",\n                1: \"%{smart_count} Dateien hochladen\",\n              },\n              uploadXNewFiles: {\n                0: \"+%{smart_count} Datei hochladen\",\n                1: \"+%{smart_count} Dateien hochladen\",\n              },\n            },\n          }}\n          closeModalOnClickOutside\n          note=\"Bilder, maximal 1 MB\"\n          open={this.state.uppyOpen}\n          onRequestClose={this.handleCloseUppyModal}\n        />\n      </div>,\n      root,\n    );\n  }\n\n  renderBlockButton = (icon, tooltip = null, onClickBlock) => (\n    // eslint-disable-next-line jsx-a11y/anchor-is-valid\n    <a\n      title={tooltip}\n      onMouseDown={event =>\n        onClickBlock(event, this.props.value.change(), this.props.onChange)\n      }\n    >\n      <span\n        className=\"icon is-medium has-text-grey-lighter tooltip\"\n        data-tooltip={tooltip}\n      >\n        <FontAwesomeIcon icon={icon} size=\"lg\" />\n      </span>\n    </a>\n  );\n\n  /**\n   * Update the menu's absolute position\n   */\n  update = ({ resetMenu = false }) => {\n    if (!this.menuWrapper) {\n      return;\n    }\n\n    if (resetMenu) {\n      this.setState({\n        style: {},\n      });\n      return;\n    }\n\n    const nodeEl = findDOMNode(this.props.value.startBlock);\n    const nodeElBBox = nodeEl.getBoundingClientRect();\n    const top = nodeElBBox.top + window.pageYOffset;\n\n    const right = window.innerWidth - (nodeElBBox.width + nodeElBBox.x);\n\n    this.setState({\n      style: {\n        top: `${top}px`,\n        right: `${right}px`,\n      },\n    });\n  };\n}\n\nexport default PlusMenu;\n","import moment from \"moment\";\nimport \"moment/locale/de\";\nimport React, { Component } from \"react\";\nimport { Value } from \"slate\";\nimport { Editor as SlateEditor } from \"slate-react\";\n\nimport schema from \"./schema\";\n\n// @ts-ignore:\nimport DocumentViewer from \"./dev-document-viewer/DocumentViewer\";\n\nimport { plugins } from \"./plugins\";\n// @ts-ignore:\nimport AddSection from \"./plugins/add-section\";\n// @ts-ignore:\nimport PlusMenuPlugin from \"./plugins/plus-menu/index\";\n// @ts-ignore:\nimport TextMenu from \"./plugins/text-menu/index\";\n\nimport importedValue from \"./value.json\";\n\nmoment.locale(\"de\");\n\n// TODO: add proper types\ninterface IStateProps {\n  value: any;\n  debounce: any;\n  hoverMenu: any;\n  plusMenu: any;\n}\n\nclass Editor extends Component<{}, IStateProps> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      debounce: null,\n      hoverMenu: null,\n      plusMenu: null,\n      value: this.handleLoad(),\n    };\n  }\n\n  public componentDidMount = () => {\n    this.updateMenu();\n  };\n\n  public componentDidUpdate = () => {\n    this.updateMenu();\n  };\n\n  public render() {\n    const HoverMenu = TextMenu().components.HoverMenu;\n    const PlusMenu = PlusMenuPlugin().components.PlusMenu;\n    const AddSectionButton = AddSection().components.AddSectionButton;\n\n    return (\n      <div className=\"columns\">\n        <div className=\"column\" />\n        <div className=\"column is-three-quarters\">\n          <div style={{ marginTop: \"2rem\" }}>\n            <HoverMenu\n              ref={(menu: any) => {\n                if (!this.state.hoverMenu) {\n                  this.setState({ hoverMenu: menu });\n                }\n              }}\n              value={this.state.value}\n              onChange={this.onChange}\n            />\n            <PlusMenu\n              ref={(menu: any) => {\n                if (!this.state.plusMenu) { this.setState({ plusMenu: menu }); }\n              }}\n              value={this.state.value}\n              onChange={this.onChange}\n            />\n            <SlateEditor\n              autoFocus={true}\n              spellCheck={true}\n              schema={schema}\n              plugins={plugins}\n              value={this.state.value}\n              onChange={this.onChange}\n              className=\"slate-editor\"\n            />\n            <AddSectionButton\n              value={this.state.value}\n              onChange={this.onChange}\n            />\n          </div>\n          {process.env.NODE_ENV === \"development\" ? (\n            <React.Fragment>\n              {/*TODO: remove ugly spacer <3*/}\n              <div style={{ height: \"500px\" }} />\n              <DocumentViewer doc={this.state.value} />\n            </React.Fragment>\n          ) : null}\n        </div>\n        <div className=\"column\" />\n      </div>\n    );\n  }\n\n  /**\n   * handles persisting the document (e.g. in localStorage or\n   * backend)\n   */\n  private handleSave = (value: any) => {\n    // Save the value to Local Storage.\n\n    const timestamp = moment(new Date());\n    const document = JSON.stringify(\n      this._addHeaderInformationToDocument(value, timestamp),\n    );\n    localStorage.setItem(\"document\", document);\n\n    // When succeeded, update the frontend UI as well\n    // (yes, using window is SO against React principles,\n    //  but I honestly have no idea rn how to do it in a\n    //  better way... PLEASE HELP!)\n    // TODO: do this in a better way\n    // @ts-ignore:\n    window.updateLastSaved(timestamp);\n  };\n\n  /**\n   * adds some header information to the document pre-saving\n   * e.g. authorid, lastSaved timestamp, ...\n   */\n  private _addHeaderInformationToDocument = (\n    value: any,\n    newSavedTimestamp: any,\n  ) => {\n    const valueJSON = value.toJSON();\n    valueJSON.document.data = {\n      ...valueJSON.document.data,\n      lastSaved: newSavedTimestamp,\n    };\n\n    return valueJSON;\n  };\n\n  /**\n   * handles retrieving the current document or loads a default\n   * document instead\n   */\n  private handleLoad = () => {\n    const document = localStorage.getItem(\"document\");\n    if (document) {\n      const existingValue = JSON.parse(document);\n      return Value.fromJSON(existingValue);\n    }\n    // TODO: no idea what is wrong here yet\n    // @ts-ignore:\n    return Value.fromJSON(importedValue);\n  };\n\n  /**\n   * deals with state changes of the slate document\n   */\n  private onChange = ({ value }: { value: any }) => {\n    // Check to see if the document has changed before saving.\n    if (value.document !== this.state.value.document) {\n      if (this.state.debounce) {\n        clearTimeout(this.state.debounce);\n      }\n      this.setState({\n        debounce: setTimeout(() => this.handleSave(value), 750),\n      });\n    }\n\n    this.setState({ value });\n  };\n\n  /**\n   * handles UI updates regarding the plugin/text-menu\n   */\n  private updateMenu = () => {\n    const { value, hoverMenu, plusMenu } = this.state;\n    if (hoverMenu) {\n      hoverMenu.update({\n        resetMenu: value.isBlurred || value.isEmpty,\n      });\n    }\n    if (plusMenu) {\n      plusMenu.update({\n        resetMenu:\n          value.isBlurred ||\n          !value.blocks.some((node: any) => node.type === \"p\"),\n      });\n    }\n  };\n}\n\nexport default Editor;\n","import PlusMenu from \"./PlusMenu\";\n\nexport default function PlusMenuPlugin(options) {\n  return {\n    changes: {},\n    helpers: {},\n    components: {\n      PlusMenu,\n    },\n    plugins: [],\n  };\n}\n","import React, { Component } from \"react\";\nimport styled, { ThemeProvider } from \"styled-components\";\n\nimport { theme } from \"./config/theme\";\n\nimport \"@uppy/core/dist/style.min.css\";\nimport \"@uppy/dashboard/dist/style.min.css\";\nimport \"bulma-tooltip/dist/css/bulma-tooltip.min.css\";\nimport \"bulma/css/bulma.css\";\nimport \"../node_modules/material-icons/iconfont/material-icons.css\";\nimport \"./App.css\";\n\nimport Editor from \"./Editor\";\n\nconst AppWrapper = styled.div`\n  margin: 0;\n  padding: 0;\n  font-family: sans-serif;\n`;\n\nclass App extends Component {\n  public render() {\n    return (\n      <ThemeProvider theme={theme}>\n        <AppWrapper>\n          <div className=\"App\">\n            <Editor />\n          </div>\n        </AppWrapper>\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nconst root = document.getElementById(\"root\");\n\nif (root) {\n  ReactDOM.render(<App />, root);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"SaveBar_button__CjDo5\",\"saveText\":\"SaveBar_saveText__2fsAK\"};"],"sourceRoot":""}